@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@model Web.Dto.AboutDtos.UpdateAboutDto
@{
    ViewData["Title"] = "Hakkımızda Düzenle";
    Layout = "~/Views/AdminLayout/Index.cshtml";

    // Sunucu tarafı önizleme URL’si (relative ise ~/ ile çöz)
    var raw = Model?.ImageUrl ?? "";
    var preview = !string.IsNullOrWhiteSpace(raw)
        ? (raw.StartsWith("http", StringComparison.OrdinalIgnoreCase)
            ? raw
            : Url.Content("~/" + raw.TrimStart('/')))
        : null;
}

<style>
    .about-section {
        background: #232a31;
        border-radius: 12px;
    }

    .about-img {
        width: 100%;
        height: 420px;
        object-fit: cover;
        border-radius: 8px;
    }

    .about-title {
        color:white;
        font-weight: 800;
        line-height: 1.1;
        font-size: clamp(1.75rem,2.5vw + 1rem,2.5rem);
    }

    .form-label {
        color: #e9ecef;
    }

    .form-hint {
        color: #adb5bd;
        font-size: .875rem;
    }
</style>
<br />
<br />
<br />
<br />
<div class="container-fluid py-3">
    <form method="post">
        <input asp-for="AboutID" type="hidden" />

        <section class="about-section text-white p-4 p-lg-5">
            <div class="row g-4 align-items-center">

                <!-- Sol: Görsel önizleme -->
                <div class="col-12 col-lg-6">
                    @if (string.IsNullOrWhiteSpace(preview))
                    {
                        <div class="about-img d-flex align-items-center justify-content-center bg-dark text-muted small">
                            Görsel yok
                        </div>
                    }
                    else
                    {
                        <img src="@preview" alt="@Model?.Title" class="about-img" loading="lazy" />
                    }
                </div>

                <!-- Sağ: Form -->
                <div class="col-12 col-lg-6">
                    <div class="mb-3">
                        <label asp-for="Title" class="form-label">Başlık</label>
                        <input asp-for="Title" class="form-control" />
                    </div>

                    <div class="mb-3">
                        <label asp-for="Description" class="form-label">Açıklama</label>
                        <textarea asp-for="Description" rows="6" class="form-control"></textarea>
                    </div>

                    <div class="mb-4">
                        <label asp-for="ImageUrl" class="form-label">Görsel Bağlantısı</label>
                        <input asp-for="ImageUrl" class="form-control" />
                        <div class="form-hint mt-1">Önizleme, kaydettiğinde güncellenir.</div>
                    </div>

                    <div class="d-grid" style="max-width:260px;">
                        <button type="submit" class="btn btn-dark btn-lg">Kaydet</button>
                    </div>
                </div>

            </div>
        </section>
    </form>
</div>
